(this.webpackJsonpt3_integracion=this.webpackJsonpt3_integracion||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(17),o=n.n(s),c=(n(68),n(10)),r=n(11),l=n(6),d=n(16),h=n(15),m=(n(69),n(12)),u=n.n(m),p=n(117),v=n(118),k=n(116),C=n(113),E=(n(101),n(102),n(114)),b=n(115),y=n(119),f=n(57),w=n.n(f),x=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(c.a)(this,n),a=t.call(this,e);var s=u()("wss://\u200ble-18262636.bitzonte.com",{autoConnect:!1,path:"/stocks"});return a.state={isConnected:e.isConnected,min:0,vol:0,last:null,max:null,var:null},a.socket=s,a.handleUpdate=a.handleUpdate.bind(Object(l.a)(a)),a.handleMovements=a.handleMovements.bind(Object(l.a)(a)),a.socket.on("BUY",a.handleMovements),a.socket.on("SELL",a.handleMovements),a.socket.on("UPDATE",a.handleUpdate),a.chartRef=i.a.createRef(),a}return Object(r.a)(n,[{key:"handleMovements",value:function(e){this.props.isConnected&&this.props.name===e.ticker&&this.setState((function(t){return{vol:t.vol+e.volume}}))}},{key:"handleUpdate",value:function(e){this.props.isConnected&&this.props.name===e.ticker&&(this.LineChart.data.labels.push(new Date(e.time)),this.LineChart.data.datasets[0].data.push(e.value),this.setState({last:e.value}),(e.value<this.state.min||0===this.state.min)&&(this.setState({min:e.value,var:this.state.last/e.value}),this.LineChart.options.scales.yAxes[0].ticks.min=e.value-5),e.value>this.state.max&&this.setState({max:e.value}),this.LineChart.update())}},{key:"componentDidUpdate",value:function(e){this.props.isConnected?this.socket.connect():this.socket.disconnect()}},{key:"componentDidMount",value:function(){this.LineChart=new w.a(this.chartRef.current,{type:"line",options:{scales:{xAxes:[{type:"time",time:{unit:"minute"}}],yAxes:[{ticks:{min:this.state.min},gridLines:{display:!1,drawBorder:!0}}]}},data:{labels:[],datasets:[{data:[],fill:"none",backgroundColor:"blue",pointRadius:2,borderColor:"blue",borderWidth:1,lineTension:0}]}})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(C.a,{fluid:!0,style:{padding:"2%"}},i.a.createElement(E.a,{style:{alignItems:"center"}},i.a.createElement(b.a,{sm:8,style:{alignItems:"center"}},this.props.isConnected&&i.a.createElement("h1",null,this.props.name),i.a.createElement("canvas",{ref:this.chartRef,hidden:!this.props.isConnected})),i.a.createElement(b.a,{sm:4,style:{alignItems:"center"}},i.a.createElement(y.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(y.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Precio M\xe1ximo")),i.a.createElement(y.a.Item,{style:{width:"100px"}},this.state.max)),i.a.createElement(y.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(y.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Precio M\xednimo")),i.a.createElement(y.a.Item,{style:{width:"100px"}},this.state.min)),i.a.createElement(y.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(y.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"\xdaltimo Precio")),i.a.createElement(y.a.Item,{style:{width:"100px"}},this.state.last)),i.a.createElement(y.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(y.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Volumen Transado")),i.a.createElement(y.a.Item,{style:{width:"100px"}},this.state.vol)),i.a.createElement(y.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(y.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Variaci\xf3n Porcentual")),i.a.createElement(y.a.Item,{style:{width:"100px"}},this.state.var,"%"))))))}}]),n}(i.a.Component),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(c.a)(this,n),a=t.call(this,e);var i=u()("wss://\u200ble-18262636.bitzonte.com",{autoConnect:!1,path:"/stocks"});return a.state={stockCharts:[],isConnected:e.isConnected},a.socket=i,a.socket.connect(),a.handleStocks=a.handleStocks.bind(Object(l.a)(a)),a.socket.on("STOCKS",a.handleStocks),a.socket.emit("STOCKS"),a}return Object(r.a)(n,[{key:"handleStocks",value:function(e){this.setState({stockCharts:e})}},{key:"componentDidUpdate",value:function(e){this.props.isConnected||this.socket.disconnect()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(C.a,{fluid:!0},i.a.createElement("ul",null,this.state.stockCharts.map((function(t){return i.a.createElement(x,{key:t.ticker,name:t.ticker,isConnected:e.props.isConnected})})))))}}]),n}(i.a.Component),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(c.a)(this,n),a=t.call(this,e);var i=u()("wss://\u200ble-18262636.bitzonte.com",{autoConnect:!1,path:"/stocks"});return a.state={isConnected:!1},a.socket=i,a.handleConnect=a.handleConnect.bind(Object(l.a)(a)),a}return Object(r.a)(n,[{key:"handleConnect",value:function(){this.setState((function(e){return{isConnected:!e.isConnected}}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(p.a,{bg:"dark",variant:"dark",sticky:"top"},i.a.createElement(v.a.Item,{className:"ml-auto"},i.a.createElement(k.a,{variant:"dark",onClick:this.handleConnect},this.state.isConnected?"Desconectar":"Conectar"))),i.a.createElement(C.a,{fluid:!0},i.a.createElement(g,{isConnected:this.state.isConnected})))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(110);o.a.render(i.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,n){e.exports=n(111)},68:function(e,t,n){},69:function(e,t,n){},98:function(e,t){}},[[63,1,2]]]);
//# sourceMappingURL=main.010679f0.chunk.js.map