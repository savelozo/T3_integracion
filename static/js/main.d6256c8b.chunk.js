(this.webpackJsonpt3_integracion=this.webpackJsonpt3_integracion||[]).push([[0],{104:function(e,t){},117:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(16),c=n.n(s),o=(n(70),n(9)),l=n(10),r=n(5),d=n(12),h=n(11),u=(n(71),n(124)),m=n(125),p=n(123),v=n(119),k=(n(72),n(122)),C=(n(73),n(120)),y=n(121),E=n(126),f=n(59),b=n.n(f),w=n(17),O=n.n(w),g=n(30),j=n.n(g),x=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(o.a)(this,n),a=t.call(this,e);var s=O()("wss://\u200ble-18262636.bitzonte.com",{autoConnect:!1,path:"/stocks"});return a.state={isConnected:e.isConnected,min:0,vol:0,last:null,max:null,var:null},a.socket=s,a.handleUpdate=a.handleUpdate.bind(Object(r.a)(a)),a.handleMovements=a.handleMovements.bind(Object(r.a)(a)),a.socket.on("BUY",a.handleMovements),a.socket.on("SELL",a.handleMovements),a.socket.on("UPDATE",a.handleUpdate),a.chartRef=i.a.createRef(),a}return Object(l.a)(n,[{key:"handleMovements",value:function(e){this.props.isConnected&&this.props.name===e.ticker&&this.setState((function(t){return{vol:t.vol+e.volume}}))}},{key:"handleUpdate",value:function(e){this.props.isConnected&&this.props.name===e.ticker&&(this.LineChart.data.labels.push(new Date(e.time)),this.LineChart.data.datasets[0].data.push(e.value),this.setState({last:e.value}),(e.value<this.state.min||0===this.state.min)&&(this.setState({min:e.value,var:this.state.last/e.value}),this.LineChart.options.scales.yAxes[0].ticks.min=e.value-5),e.value>this.state.max&&this.setState({max:e.value}),this.LineChart.update())}},{key:"componentDidUpdate",value:function(e){this.props.isConnected?this.socket.connect():this.socket.disconnect()}},{key:"componentDidMount",value:function(){this.LineChart=new b.a(this.chartRef.current,{type:"line",options:{scales:{xAxes:[{type:"time",time:{unit:"minute"}}],yAxes:[{ticks:{min:this.state.min},gridLines:{display:!1,drawBorder:!0}}]}},data:{datasets:[{data:[],label:"Precio de la acci\xf3n",fill:"none",backgroundColor:"blue",pointRadius:2,borderColor:"blue",borderWidth:1,lineTension:0}]}})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(v.a,{fluid:!0,style:{padding:"2%"}},i.a.createElement(C.a,{style:{alignItems:"center"}},i.a.createElement(y.a,{sm:8,style:{alignItems:"center"}},this.props.isConnected&&i.a.createElement("h1",null,this.props.name),i.a.createElement("canvas",{ref:this.chartRef,hidden:!this.props.isConnected})),i.a.createElement(y.a,{sm:4,style:{alignItems:"center"}},i.a.createElement(E.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(E.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Precio M\xe1ximo")),i.a.createElement(E.a.Item,{style:{width:"100px"}},this.state.max)),i.a.createElement(E.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(E.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Precio M\xednimo")),i.a.createElement(E.a.Item,{style:{width:"100px"}},this.state.min)),i.a.createElement(E.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(E.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"\xdaltimo Precio")),i.a.createElement(E.a.Item,{style:{width:"100px"}},this.state.last)),i.a.createElement(E.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(E.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Volumen Transado")),i.a.createElement(E.a.Item,{style:{width:"100px"}},this.state.vol)),i.a.createElement(E.a,{horizontal:!0,style:{width:"10rem",padding:"2%"},hidden:!this.props.isConnected},i.a.createElement(E.a.Item,{action:!0,variant:"dark",style:{width:"150px"}},i.a.createElement("b",null,"Variaci\xf3n Porcentual")),i.a.createElement(E.a.Item,{style:{width:"100px"}},this.state.var,"%"))))))}}]),n}(i.a.Component),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(o.a)(this,n),a=t.call(this,e);var s=O()("wss://\u200ble-18262636.bitzonte.com",{autoConnect:!1,path:"/stocks"});return a.state={isConnected:e.isConnected,buy:0,sell:0,vol:null,stocks:null},a.socket=s,a.handleUpdate=a.handleUpdate.bind(Object(r.a)(a)),a.handleBuy=a.handleBuy.bind(Object(r.a)(a)),a.handleSell=a.handleSell.bind(Object(r.a)(a)),a.socket.on("BUY",a.handleMovements),a.socket.on("SELL",a.handleMovements),a.chartRef=i.a.createRef(),a}return Object(l.a)(n,[{key:"handleBuy",value:function(e){}},{key:"handleSell",value:function(e){this.props.isConnected&&this.props.name===e.ticker&&this.setState((function(t){return{vol:t.vol+e.volume}}))}},{key:"handleUpdate",value:function(e){}},{key:"componentDidUpdate",value:function(e){this.props.isConnected?this.socket.connect():this.socket.disconnect()}},{key:"componentDidMount",value:function(){var e=this;this.card=i.a.createElement(j.a,{flipOnHover:!1,flipOnClick:!0,flipDirection:"horizontal",ref:function(t){return e.flippy=t},style:{width:"200px",height:"200px",padding:"5%"}},i.a.createElement(g.FrontSide,{style:{backgroundColor:"white"}},this.props.name),i.a.createElement(g.BackSide,{style:{backgroundColor:"white"}},this.props.companies))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(v.a,{fluid:!0,style:{padding:"2%"}},this.card))}}]),n}(i.a.Component),I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(o.a)(this,n),a=t.call(this,e);var i=O()("wss://\u200ble-18262636.bitzonte.com",{autoConnect:!1,path:"/stocks"});return a.state={Charts:[],isConnected:e.isConnected,data_ready:!1},a.socket=i,a.socket.connect(),a.handleStocks=a.handleStocks.bind(Object(r.a)(a)),a.socket.on(e.type,a.handleStocks),a.socket.emit(e.type),a}return Object(l.a)(n,[{key:"handleStocks",value:function(e){this.setState({Charts:e,data_ready:!0})}},{key:"componentDidUpdate",value:function(e){this.props.isConnected||this.socket.disconnect()}},{key:"render",value:function(){var e=this;return"STOCKS"===this.props.type?i.a.createElement("div",null,i.a.createElement("div",{style:{padding:"2%"}},this.props.isConnected&&i.a.createElement("h1",null,"Mercados de Acciones")),i.a.createElement(v.a,{fluid:!0},i.a.createElement("ul",null,this.state.Charts.map((function(t){return i.a.createElement(x,{key:t.ticker,name:t.ticker,isConnected:e.props.isConnected})}))))):i.a.createElement("div",null,i.a.createElement("div",{style:{padding:"2%"}},this.props.isConnected&&i.a.createElement("h1",null,"Mercados Abiertos")),i.a.createElement(v.a,{fluid:!0},i.a.createElement("ul",null,i.a.createElement(k.a,{hidden:!this.props.isConnected},this.state.data_ready&&Object.keys(this.state.Charts).map((function(t,n){return i.a.createElement(S,{key:e.state.Charts[t].name,name:e.state.Charts[t].name,ticker:e.state.Charts[t].exchange_ticker,country:e.state.Charts[t].country,companies:e.state.Charts[t].listed_companies,isConnected:e.props.isConnected})}))))))}}]),n}(i.a.Component),M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={isConnected:!1},a.handleConnect=a.handleConnect.bind(Object(r.a)(a)),a}return Object(l.a)(n,[{key:"handleConnect",value:function(){this.setState((function(e){return{isConnected:!e.isConnected}}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(u.a,{bg:"dark",variant:"dark",sticky:"top"},i.a.createElement(m.a.Item,{className:"ml-auto"},i.a.createElement(p.a,{variant:"dark",onClick:this.handleConnect},this.state.isConnected?"Desconectar":"Conectar"))),i.a.createElement(v.a,{fluid:!0},i.a.createElement(I,{isConnected:this.state.isConnected,type:"STOCKS"})),i.a.createElement(v.a,{fluid:!0},i.a.createElement(I,{isConnected:this.state.isConnected,type:"EXCHANGES"})))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(116);c.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){e.exports=n(117)},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.d6256c8b.chunk.js.map